var socket = new io.connect(window.CONFIG.URL),	com = [],	updates = [],	playerNames = [],	playerList="",	playerOnServer,	QueryString=getUrlVars();	socket.on("competitionUpdates",function(data){	updates=data.updates;	updateCompList();	updateRemainingTime();}); socket.on("updateCompetitionPlayerList",function(data){	playerOnServer=data.p;	for(var i=0;i<=playerOnServer.length-1;i++){		getName(playerOnServer[i]);	}	playerList="<ul>";	for(var j=0;j<=playerNames.length-1;j++){		playerList+="<li>"+playerNames[j]+"</li>";	}	playerList+="</ul>";}); socket.on("CompetitionPlayerPlayStauts",function(data){	var obj=data;	    result=parseInt(data.result);		switch(result){			case 1:	result="you have already Finished Competition";					$(gvar.HTML.result_status).html(result).addClass("War");					break;			case 2:	result="Sorry! Competition is Over for you";					$(gvar.HTML.result_status).html(result).addClass("War");					break;			case 3:	//You were Playing Before but can Continue...!;					socket.emit("updateCompetitionPlayerScore",{c:urlData['i'], p:urlData['p'], s:0});					loadGameInfo();					loadGameLevels();					$('#hiddenInfo').val(urlData['i']+'|'+urlData['p']);					break;			case 4: //Welcome in Competition;					loadGameInfo();					loadGameLevels();					$('#hiddenInfo').val(urlData['i']+'|'+urlData['p']);					break;		}}); function getName(player_id){	$.ajax({		url: '/getPlayerName',		type: "GET",		data:{id:player_id},		dataType: 'json',		async:false,		success: function(data) {			var obj=data[0];			if(!in_array(obj.player_name, playerNames))				playerNames.push(obj.player_name);		},		error  : function(){			$(gvar.HTML.status).html('error'); 		}	});}function updateCompList(){	if(updates.length>0){		$.each($("li.competition"),function(i,data){			var el=$(data),id=parseInt(el.attr('id'));			for(var i=0;i<=updates.length-1;i++){				var obj = updates[i];					comp_id = obj["id"];				if(parseInt(comp_id) === parseInt(id)){					el.find("span.status").html(obj["status"]);					el.find("span.statusText").html(obj["statusText"]);								}			}		});			}}function updateRemainingTime(){	if(updates.length>0 && QueryString!=='undefined' && QueryString['i']!=='undefined'){		for(var i=0;i<=updates.length-1;i++){			var obj = updates[i];				comp_id = obj["id"];			if(parseInt(comp_id) === parseInt(QueryString['i'])){				if(obj["status"]==="Ended"||obj["status"]==="Just Ended"){					$(gvar.HTML.result_status).html("Sorry! Competition Time Over").addClass("War");				}				else{					$(gvar.HTML.time).html(obj["statusText"]);					$(gvar.HTML.gameStatus).html(obj["status"]);				}			}		}	}}